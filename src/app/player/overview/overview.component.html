<div class="row" *ngIf="!playerError">
  <div class="col-lg-8">
    <legend class="mt-2">
      Most Played Heroes <small>All Time</small>
      <!-- <small class="float-right mt-3"><a [routerLink]="['matches']">+more</a></small> -->
    </legend>
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>Hero</th>
          <th>Matches</th>
          <th>Win %</th>
          <th>KDA</th>
          <th>GPM</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="loading">
          <td>Loading...</td>
        </tr>
        <tr *ngFor="let h of heroes">
          <td>
            <img width="45" height="45" alt="hero icon" src="https://www.heroesofnewerth.com/images/heroes/{{h.hero_id}}/icon_128.jpg">
            {{ h.lastMatch | timeAgo }}
          </td>
          <td class="p-1">
            <div class="pb-1">{{ h.matches | number }}</div>
            <bar [value]="h.matches" [max]="maxHeroes.matches"></bar>
          </td>
          <td class="p-1">
            <div class="pb-1">{{ h.winPercent | number:'1.0-1' }}%</div>
            <bar [value]="h.winPercent" [max]="maxHeroes.winPercent"></bar>
          </td>
          <td class="p-1">
            <div class="pb-1">{{ h.kda | number:'1.0-2' }}</div>
            <bar [value]="h.kda" [max]="maxHeroes.kda"></bar>
          </td>
          <td class="p-1">
            <div class="pb-1">{{ h.gpm | number:'1.0-0' }}</div>
            <bar [value]="h.gpm" [max]="maxHeroes.gpm"></bar>
          </td>

        </tr>
      </tbody>
    </table>

    <legend class="mt-2">
      Latest Matches
      <small class="float-right mt-3"><a [routerLink]="['matches']">+more</a></small>
    </legend>
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>Hero</th>
          <th>Result</th>
          <th>Type</th>
          <th>Duration</th>
          <th>K/D/A</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="loading">
          <td>Loading...</td>
        </tr>
        <tr *ngFor="let m of matches">
          <td><img width="45" height="45" alt="hero icon" src="https://www.heroesofnewerth.com/images/heroes/{{m.hero_id}}/icon_128.jpg"></td>
          <td>
            <div>
              <a [routerLink]="['/match', m.match_id]">
                <span *ngIf="m.win" class="text-success">Won Match</span>
                <span *ngIf="!m.win" class="text-danger">Lost Match</span>
              </a>
            </div>
            <small>{{ m.date | timeAgo }}</small>
          </td>
          <td>
            <div>{{ m | matchMode }}</div>
            <small>
              <hb-bracket [match]="m"></hb-bracket>
            </small>
          </td>
          <td>
            <div class="pb-1">{{ m.length / 60 | number:'1.0-0' }} Minutes</div>
            <bar [value]="m.length" [max]="maxLength"></bar>
          </td>
          <td>
            <div class="pb-1">{{ m.kills }}/{{ m.deaths }}/{{ m.assists }}</div>
            <div class="bar">
              <div class="segment kills" [style.width.%]="m.kills / (m.kills + m.assists + m.deaths) * 100"></div>
              <div class="segment deaths" [style.width.%]="m.deaths / (m.kills + m.assists + m.deaths) * 100"></div>
              <div class="segment assists" [style.width.%]="m.assists / (m.kills + m.assists + m.deaths) * 100"></div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

  </div>
  <div class="col-lg-4">
    <div class="row">
      <div class="col">
        <div class="mt-3 text-center">
          <ng2-adsense></ng2-adsense>
        </div>
      </div>
    </div>

    <legend class="mt-2">
      Friends
      <small class="mt-3">This Week</small>
    </legend>
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>Friend</th>
          <th class="text-right">Matches</th>
          <th class="text-right">Win Rate</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="loading">
          <td>Loading...</td>
        </tr>
        <tr *ngIf="with && with.length === 0">
          <td>None</td>
        </tr>
        <tr *ngFor="let p of with | slice:0:10">
          <th scope="row"><a [routerLink]="['/player', p.nickname]">{{p.nickname}}</a></th>
          <td class="text-right">{{p.t}}</td>
          <td class="text-right">{{p.w / p.t * 100 | number:'1.1-1'}}%</td>
        </tr>
      </tbody>
    </table>
    <legend class="mt-2">
      Opponents
      <small class="mt-3">This Week</small>
    </legend>
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>Player</th>
          <th class="text-right">Matches</th>
          <th class="text-right">Win Rate</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="loading">
          <td>Loading...</td>
        </tr>
        <tr *ngIf="against && against.length === 0">
          <td>None</td>
        </tr>
        <tr *ngFor="let p of against | slice:0:10">
          <th scope="row"><a [routerLink]="['/player', p.nickname]">{{p.nickname}}</a></th>
          <td class="text-right">{{p.t}}</td>
          <td class="text-right">{{p.w / p.t * 100 | number:'1.1-1'}}%</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
